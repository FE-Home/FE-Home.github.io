title: node.js简介
date: 2018/10/14
categories:
- node
---

背景：最近学习Node.js，其中提到了Node.js是单线程，多进程，那么：
1. 什么是进程，什么是线程呢？
2. 其它语言的进程线程分别是什么，和Node.js对比的好处和坏处？

首先我们还是引用官方语言解读一下：
1. 进程：
  * 进程（Process）是计算机中的程序关于某数据集合上的一次运行活动，是系统进行资源分配和调度的基本单位，是操作系统结构的基础。在早期面向进程设计的计算机    结构中，进程是程序的基本执行实体；在当代面向线程设计的计算机结构中，进程是线程的容器。程序是指令、数据及其组织形式的描述，进程是程序的实体。

  * 狭义定义：进程是正在运行的程序的实例（an instance of a computer program that is being executed）。
  * 广义定义：进程是一个具有一定独立功能的程序关于某个数据集合的一次运行活动。它是操作系统动态执行的基本单元，在传统的操作系统中，进程既是基本的分配单元，  也是基本的执行单元。
  2. 线程
   线程，有时被称为轻量进程(Lightweight Process，LWP），是程序执行流的最小单元。一个标准的线程由线程ID，当前指令指针(PC），寄存器集合和堆栈组成。另外，线程是进程中的一个实体，是被系统独立调度和分派的基本单位，线程自己不拥有系统资源，只拥有一点儿在运行中必不可少的资源，但它可与同属一个进程的其它线程共享进程所拥有的全部资源。一个线程可以创建和撤消另一个线程，同一进程中的多个线程之间可以并发执行。由于线程之间的相互制约，致使线程在运行中呈现出间断性。线程也有就绪、阻塞和运行三种基本状态。就绪状态是指线程具备运行的所有条件，逻辑上可以运行，在等待处理机；运行状态是指线程占有处理机正在运行；阻塞状态是指线程在等待一个事件（如某个信号量），逻辑上不可执行。每一个程序都至少有一个线程，若程序只有一个线程，那就是程序本身。
   线程是程序中一个单一的顺序控制流程。进程内有一个相对独立的、可调度的执行单元，是系统独立调度和分派CPU的基本单位指令运行时的程序的调度单位。在单个程序中同时运行多个线程完成不同的工作，称为多线程。
 
   ps: 更多请自行百度百科

   1. 上面的语言貌似有点晦涩：通俗的解释：打开电脑，打开引用管理器：查看你的进程，这里面展示的就是进程了。
      * 宏观来说:你打开一个程序，开启一个进程（不太准确，可能是打开多个进程，为了便于理解）例如qq，然后你发消息，相当于调用一个线程

   2. 根本区别：
    * 进程是cpu资源分配的最小单位，线程是cpu调度的最小单位。以前进程既是资源分配也是调度的最小单位，后来为了更合理的使用cpu(实际上是cpu性能越来越好)，才将资源分配和调度分开，就有了线程。
    * 所谓的资源就是计算机里的中央处理器，内存，文件，网络等等。
    * 进程，在一定的环境下，把静态的程序代码运行起来，通过使用不同的资源，来完成一定的任务。比如说，进程的环境包括环境变量，进程所掌控的资源，有中央处理器，有内存，打开的文件，映射的网络端口等等。这里我把进程对内存的管理稍微展开说一下。一个系统中，有很多进程，它们都会使用内存。为了确保内存不被别人使用，每个进程所能访问的内存都是圈好的。一人一份，谁也不干扰谁。这里给大家想强调的就是，进程需要管理好它的资源。
    * 其中，线程作为进程的一部分，扮演的角色就是怎么利用中央处理器去运行代码。这其中牵扯到的最重要资源的是中央处理器和其中的寄存器，和线程的栈（stack）。这里想强调的是，线程关注的是中央处理器的运行，而不是内存等资源的管理。

2. Node.js和其它语言线程类比
  * Node.js: 单线程：
    * 优点： 避免了频繁创建、切换线程的开销、执行速度快
    * 优点： 资源占用小，线程绝对安全（因为就一个线程去使用资源）
    * 优点： 利用异步编程实现了非阻塞
    * 缺点： 因为Node.js是单线程，在某一个时刻只处理某一个请求，如果某个需求有大量计算，其余的请求就是被堵塞，造成主进程堵塞
  * C#、python多线程
    * 优点： 编码方式灵活，多线程执行任务不会堵塞主线程
    * 开发难度相对大，线程开销更大，需要考虑到线程安全

    node.js实现多线程的解决方案：tagg模块（目前只能在linux下运行） tagg2修改了tagg的发布方式，也可以在其它操作系统运行

    怎么样：是不是顿时觉得Node.js更加强大了呢。

